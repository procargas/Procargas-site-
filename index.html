<script>
  // Alterna entre login e cadastro
  function toggleAuth(sectionId) {
    document.getElementById('loginSection').classList.add('hidden');
    document.getElementById('registerSection').classList.add('hidden');
    document.getElementById(sectionId).classList.remove('hidden');
  }

  // Simulação de login (sem autenticação real)
  function handleLogin() {
    const user = document.getElementById('loginUser').value.trim();
    const pass = document.getElementById('loginPass').value.trim();

    if (user === "" || pass === "") {
      alert("Preencha todos os campos.");
      return;
    }

    // Supondo login válido
    document.getElementById('authContainer').classList.add('hidden');
    document.getElementById('mainContent').classList.remove('hidden');
    showSection('welcome');
  }

  // Simulação de cadastro (sem persistência real)
  function handleRegister() {
    const user = document.getElementById('regUser').value.trim();
    const pass = document.getElementById('regPass').value.trim();
    const dob = document.getElementById('regDob').value;
    const cpf = document.getElementById('regCpf').value.trim();

    if (!user || !pass || !dob || !cpf) {
      alert("Preencha todos os campos.");
      return;
    }

    alert("Conta criada com sucesso! Faça login.");
    toggleAuth('loginSection');
  }

  // Alterna entre seções (Início, Aulas, Quiz, Certificado)
  function showSection(sectionId) {
    const sections = document.querySelectorAll('#contentArea > section');
    sections.forEach(section => section.classList.add('hidden'));

    document.getElementById(sectionId).classList.remove('hidden');

    // Ativa primeira aba se entrar em "Aulas"
    if (sectionId === 'lessons') {
      showTab(0);
    }
  }

  // Abas das aulas
  const tabContents = [
    {
      title: "Fundamentos da Logística de Carregamento",
      content: "Conteúdo detalhado da Aula 1. (mínimo 2 páginas)..."
    },
    {
      title: "Tipos de Cargas e Embalagens",
      content: "Conteúdo detalhado da Aula 2. (mínimo 2 páginas)..."
    },
    {
      title: "Equipamentos e Segurança no Carregamento",
      content: "Conteúdo detalhado da Aula 3. (mínimo 2 páginas)..."
    },
    {
      title: "Planejamento de Carga e Roteirização",
      content: "Conteúdo detalhado da Aula 4. (mínimo 2 páginas)..."
    },
    {
      title: "Sustentabilidade e Eficiência Logística",
      content: "Conteúdo detalhado da Aula 5. (mínimo 2 páginas)..."
    }
  ];

  function showTab(index) {
    const tabButtons = document.querySelectorAll(".tab-button");
    const tabContent = document.getElementById("tabContent");

    tabButtons.forEach(btn => btn.classList.remove("active"));
    tabButtons[index].classList.add("active");

    tabContent.innerHTML = `
      <h3>${tabContents[index].title}</h3>
      <p>${tabContents[index].content}</p>
    `;
  }

  // Geração do certificado com jsPDF
  function generateCertificate() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    doc.setFontSize(20);
    doc.text("Certificado de Conclusão", 20, 30);

    doc.setFontSize(14);
    doc.text("Certificamos que o(a) aluno(a) concluiu com êxito o curso:", 20, 50);
    doc.text("Curso de Carregamento Logístico – ProCarga", 20, 60);

    doc.text("Data: " + new Date().toLocaleDateString('pt-BR'), 20, 80);
    doc.text("Assinatura: __________________________", 20, 110);

    doc.save("certificado_procarga.pdf");
  }
</script>
